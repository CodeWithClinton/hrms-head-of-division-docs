````md
# Division Head Endpoints (Frontend Docs)

These endpoints are used by a **Division Head** dashboard to view division stats, ongoing appraisals by unit, unit staff lists, and promotion statistics/requests.

## Base URL
> Use your project base API URL, e.g. `BASE_URL/hrms/`

## Auth
All endpoints require authentication.

**Header**
```http
Authorization: Bearer <access_token>
Content-Type: application/json
````

**Error (Unauthenticated)**

* `401 Unauthorized`

---

# 1) Division Head Stats

## GET `/division_head_stats/`

Returns summary stats for a division (units, staff, leaves, promotions, appraisals).

### Query Params

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `division_id` | number | ✅        | Division ID |

### Example Request

```http
GET /division_head_stats/?division_id=3
Authorization: Bearer <token>
```

### Success Response (200)

```json
{
  "division": "Academic Division",
  "total_units": 5,
  "total_staff": 92,
  "total_leaves": 14,
  "total_promotions": 27,
  "active_appraisals": 1,
  "total_appraisals": 120,
  "approved_appraisals": 46
}
```

### Error Responses

**Missing division_id (400)**

```json
{ "error": "division_id is required" }
```

---

# 2) Division Ongoing Appraisals (By Unit)

## GET `/division_head_ongoing_appraisals/`

Returns division info and a list of units in that division, each including:

* appraisal periods (active ones)
* total staff involved in appraisals for that unit

### Query Params

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `division_id` | number | ✅        | Division ID |

### Example Request

```http
GET /division_head_ongoing_appraisals/?division_id=3
Authorization: Bearer <token>
```

### Success Response (200)

```json
{
  "division": "Academic Division",
  "units": [
    {
      "id": 10,
      "name": "Computer Science Unit",
      "appraisal_period": [
        {
          "id": 7,
          "name": "2025/2026 Appraisal",
          "is_active": true,
          "created_at": "2026-01-10T10:05:00Z"
        }
      ],
      "appraisal_total_staff": 18
    }
  ]
}
```

> Note: `appraisal_period` is generated by `AppraisalPeriodSerializerII` (fields may differ based on your serializer).

### Error Responses

**Missing division_id (400)**

```json
{ "error": "division_id is required" }
```

---

# 3) Get Staff in a Unit

## GET `/get_unit_staff/<unit_id>/`

Returns staff in a unit, including each staff member’s appraisals.

### Path Params

| Name      | Type   | Required | Description |
| --------- | ------ | -------- | ----------- |
| `unit_id` | number | ✅        | Unit ID     |

### Example Request

```http
GET /get_unit_staff/10/
Authorization: Bearer <token>
```

### Success Response (200)

```json
{
  "unit": "Computer Science Unit",
  "staff": [
    {
      "id": 31,
      "full_name": "Jane Doe",
      "email": "jane@example.com",
      "phone_number": "08012345678",
      "date_of_employment": "2023-02-01",
      "employment_type": "FULL_TIME",
      "appraisals": [
        {
          "id": 55,
          "status": "reviewed",
          "completed": true
        }
      ]
    }
  ]
}
```

> Note: `appraisals` comes from `StaffAppraisalSerializer` (fields may differ based on that serializer).

### Error Responses

**Invalid unit_id (404)**

```json
{ "detail": "Not found." }
```

---

# 4) Division Promotion Stats

## GET `/division_promotion_stats/<division_id>/`

Returns promotion counts for staff under a division.

### Path Params

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `division_id` | number | ✅        | Division ID |

### Example Request

```http
GET /division_promotion_stats/3/
Authorization: Bearer <token>
```

### Success Response (200)

```json
{
  "division": "Academic Division",
  "total_promotions": 27,
  "approved_promotions": 10,
  "pending_promotions": 12,
  "rejected_promotions": 5
}
```

### Error Responses

**Invalid division_id (404)**

```json
{ "detail": "Not found." }
```

---

# 5) Division Staff Promotion Requests (List)

## GET `/division_staff_promotion_requests/<division_id>/`

Returns all promotion requests for staff under a division, ordered by newest first.

### Path Params

| Name          | Type   | Required | Description |
| ------------- | ------ | -------- | ----------- |
| `division_id` | number | ✅        | Division ID |

### Example Request

```http
GET /division_staff_promotion_requests/3/
Authorization: Bearer <token>
```

### Success Response (200)

```json
{
  "division": "Academic Division",
  "promotions": [
    {
      "id": 101,
      "status": "SUBMITTED",
      "created_at": "2026-02-04T12:11:00Z"
    },
    {
      "id": 99,
      "status": "APPROVED",
      "created_at": "2026-01-29T09:20:00Z"
    }
  ]
}
```
